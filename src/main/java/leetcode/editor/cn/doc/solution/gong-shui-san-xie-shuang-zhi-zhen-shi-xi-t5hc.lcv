## åŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰

è¿™æ˜¯ä¸€é“ä½¿ç”¨åŒæŒ‡é’ˆå®ç°æ»‘åŠ¨çª—å£çš„è£¸é¢˜ã€‚

å…·ä½“çš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªå¤§å°ä¸º $26$ çš„æ•°ç»„ $c2$ æ¥ç»Ÿè®¡å­—ç¬¦ä¸² `p` çš„è¯é¢‘ï¼Œå¦å¤–ä¸€ä¸ªåŒç­‰å¤§å°çš„æ•°ç»„ $c1$ ç”¨æ¥ç»Ÿè®¡ã€Œæ»‘åŠ¨çª—å£ã€å†…çš„ `s` çš„å­ä¸²è¯é¢‘ã€‚

å½“ä¸¤ä¸ªæ•°ç»„æ‰€ç»Ÿè®¡è¯é¢‘ç›¸ç­‰ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ä¸ªå¼‚ä½ç»„ï¼Œå°†çª—å£çš„å·¦ç«¯ç‚¹åŠ å…¥ç­”æ¡ˆã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    public List<Integer> findAnagrams(String s, String p) {
        List<Integer> ans = new ArrayList<>();
        int n = s.length(), m = p.length();
        int[] c1 = new int[26], c2 = new int[26];
        for (int i = 0; i < m; i++) c2[p.charAt(i) - 'a']++;
        for (int l = 0, r = 0; r < n; r++) {
            c1[s.charAt(r) - 'a']++;
            if (r - l + 1 > m) c1[s.charAt(l++) - 'a']--;
            if (check(c1, c2)) ans.add(l);
        }
        return ans;
    }
    boolean check(int[] c1, int[] c2) {
        for (int i = 0; i < 26; i++) {
            if (c1[i] != c2[i]) return false;
        }
        return true;
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼šä»¤ `s` å’Œ `p` çš„é•¿åº¦åˆ†åˆ«ä¸º $n$ å’Œ $m$ï¼Œ$C = 26$ ä¸ºå­—ç¬¦é›†å¤§å°ã€‚ç»Ÿè®¡ `p` è¯é¢‘ï¼ˆæ„å»º $c2$ æ•°ç»„ï¼‰çš„å¤æ‚åº¦ä¸º $O(m)$ï¼›ä½¿ç”¨åŒæŒ‡é’ˆæ£€æŸ¥ `s` ä¸²çš„å¤æ‚åº¦ä¸º $O(C * n)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(C*n + m)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## ä¼˜åŒ– check

è§£æ³•ä¸€ä¸­æ¯æ¬¡å¯¹æ»‘åŠ¨çª—å£çš„æ£€æŸ¥éƒ½ä¸å¯é¿å…éœ€è¦æ£€æŸ¥ä¸¤ä¸ªè¯é¢‘æ•°ç»„ï¼Œå¤æ‚åº¦ä¸º $O(C)$ã€‚

äº‹å®ä¸Šï¼Œæˆ‘ä»¬åªå…³å¿ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦å®Œå…¨ä¸€è‡´ï¼Œå› è€Œæˆ‘ä»¬èƒ½å¤Ÿåªç»´æŠ¤ä¸€ä¸ªè¯é¢‘æ•°ç»„ $cnt$ æ¥å®ç°ã€‚

èµ·å§‹å¤„ç† `p` ä¸²æ—¶ï¼Œåªå¯¹ $cnt$ è¿›è¡Œè¯é¢‘å­—ç¬¦è‡ªå¢æ“ä½œã€‚å½“å¤„ç† `s` çš„æ»‘åŠ¨çª—å£å­ä¸²æ—¶ï¼Œå°è¯•å¯¹ $cnt$ ä¸­çš„è¯é¢‘è¿›è¡Œã€ŒæŠµæ¶ˆ/æ¢å¤ã€æ“ä½œï¼š
* å½“æ»‘åŠ¨çª—å£çš„å³ç«¯ç‚¹å³ç§»æ—¶ï¼ˆå¢åŠ å­—ç¬¦ï¼‰ï¼Œå¯¹ $cnt$ æ‰§è¡Œå³ç«¯ç‚¹å­—ç¬¦çš„ã€ŒæŠµæ¶ˆã€æ“ä½œï¼›
* å½“æ»‘åŠ¨çª—å£çš„å·¦ç«¯ç‚¹å³ç§»æ—¶ï¼ˆå‡å°‘å­—ç¬¦ï¼‰ï¼Œå¯¹ $cnt$ æ‰§è¡Œå·¦ç«¯ç‚¹å­—ç¬¦çš„ã€Œæ¢å¤ã€æ“ä½œã€‚

åŒæ—¶ï¼Œä½¿ç”¨å˜é‡ $a$ ç»Ÿè®¡ `p` ä¸­ä¸åŒå­—ç¬¦çš„æ•°é‡ï¼Œä½¿ç”¨å˜é‡ $b$ ç»Ÿè®¡æ»‘åŠ¨çª—å£ï¼ˆå­ä¸²ï¼‰å†…æœ‰å¤šå°‘ä¸ªå­—ç¬¦è¯é¢‘ä¸ $p$ ç›¸ç­‰ã€‚

å½“æ»‘åŠ¨çª—å£ç§»åŠ¨ï¼ˆ æ‰§è¡Œã€ŒæŠµæ¶ˆ/æ¢å¤ã€ï¼‰æ—¶ï¼Œå¦‚æœã€ŒæŠµæ¶ˆã€åè¯¥å­—ç¬¦è¯é¢‘ä¸º $0$ï¼Œè¯´æ˜æœ¬æ¬¡å³ç«¯ç‚¹å³ç§»ï¼Œå¤šäº§ç”Ÿäº†ä¸€ä½è¯é¢‘ç›¸åŒçš„å­—ç¬¦ï¼›å¦‚æœã€Œæ¢å¤ã€åè¯¥å­—ç¬¦è¯é¢‘æ•°é‡ä¸º $1$ï¼Œè¯´æ˜å°‘äº†ä¸€ä¸ªä¸ºè¯é¢‘ç›¸åŒçš„å­—ç¬¦ã€‚å½“ä¸”ä»…å½“ $a = b$ æ—¶ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªæ–°çš„å¼‚ä½ç»„ã€‚

ä»£ç ï¼š

* []

```Java
class Solution {
    public List<Integer> findAnagrams(String s, String p) {
        List<Integer> ans = new ArrayList<>();
        int n = s.length(), m = p.length();
        int[] cnt = new int[26];
        for (int i = 0; i < m; i++) cnt[p.charAt(i) - 'a']++;
        int a = 0;
        for (int i = 0; i < 26; i++) if (cnt[i] != 0) a++;
        for (int l = 0, r = 0, b = 0; r < n; r++) {
            // å¾€çª—å£å¢åŠ å­—ç¬¦ï¼Œè¿›è¡Œè¯é¢‘çš„æŠµæ¶ˆæ“ä½œï¼Œå¦‚æœæŠµæ¶ˆåè¯é¢‘ä¸º 0ï¼Œè¯´æ˜æœ‰ä¸€ä¸ªæ–°çš„å­—ç¬¦è¯é¢‘ä¸ p å®Œå…¨ç›¸ç­‰
            if (--cnt[s.charAt(r) - 'a'] == 0) b++; 
            // è‹¥çª—å£é•¿åº¦è¶…è¿‡è§„å®šï¼Œå°†çª—å£å·¦ç«¯ç‚¹å³ç§»ï¼Œæ‰§è¡Œè¯é¢‘æ¢å¤æ“ä½œï¼Œå¦‚æœæ¢å¤åè¯é¢‘ä¸º 1ï¼ˆæ¢å¤å‰ä¸º 0ï¼‰ï¼Œè¯´æ˜å°‘äº†ä¸€ä¸ªè¯é¢‘ä¸ p å®Œå…¨æ€§ç›¸ç­‰çš„å­—ç¬¦
            if (r - l + 1 > m && ++cnt[s.charAt(l++) - 'a'] == 1) b--;
            if (b == a) ans.add(l);
        }
        return ans;
    }
}
```

* æ—¶é—´å¤æ‚åº¦ï¼šä»¤ `s` å’Œ `p` çš„é•¿åº¦åˆ†åˆ«ä¸º $n$ å’Œ $m$ï¼Œ$C = 26$ ä¸ºå­—ç¬¦é›†å¤§å°ã€‚æ„é€  $cnt$ çš„å¤æ‚åº¦ä¸º $O(m)$ï¼Œç»Ÿè®¡ $p$ ä¸­ä¸åŒçš„å­—ç¬¦æ•°é‡ä¸º $O(C)$ï¼Œå¯¹ `s` è¿›è¡Œæ»‘åŠ¨çª—å£æ‰«æå¾—å‡ºç­”æ¡ˆçš„å¤æ‚åº¦ä¸º $O(n)$ã€‚æ•´ä½“å¤æ‚åº¦ä¸º $O(m + C + n)$
* ç©ºé—´å¤æ‚åº¦ï¼š$O(C)$

---

## å…¶ä»–ã€Œæ»‘åŠ¨çª—å£ã€å†…å®¹

åŠ ç»ƒå¦‚ä¸‹ã€Œæ»‘åŠ¨çª—å£ã€ç›¸å…³å†…å®¹ ğŸ­ğŸ­ğŸ­

| é¢˜ç›®                                                                                                         | é¢˜è§£                                                                                                                                                                      | éš¾åº¦ | æ¨èæŒ‡æ•°   |
| ------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---- | ---------- |
| [3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/solution/shua-chuan-lc-shuang-zhi-zhen-ha-xi-biao-q08m/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [30. ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²](https://leetcode-cn.com/problems/substring-with-concatenation-of-all-words/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/substring-with-concatenation-of-all-words/solution/shua-chuan-lc-po-su-ha-xi-biao-jie-fa-hu-ml3x/) | å›°éš¾ | ğŸ¤©ğŸ¤© |
| [187. é‡å¤çš„DNAåºåˆ—](https://leetcode-cn.com/problems/repeated-dna-sequences/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/repeated-dna-sequences/solution/gong-shui-san-xie-yi-ti-shuang-jie-hua-d-30pg/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [220. å­˜åœ¨é‡å¤å…ƒç´  III](https://leetcode-cn.com/problems/contains-duplicate-iii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/contains-duplicate-iii/solution/gong-shui-san-xie-yi-ti-shuang-jie-hua-d-dlnv/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤© |
| [424. æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦](https://leetcode-cn.com/problems/longest-repeating-character-replacement/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-repeating-character-replacement/solution/ping-ping-wu-qi-shuang-zhi-zhen-da-bai-h-fgif/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [480. æ»‘åŠ¨çª—å£ä¸­ä½æ•°](https://leetcode-cn.com/problems/sliding-window-median/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/sliding-window-median/solution/xiang-jie-po-su-jie-fa-you-xian-dui-lie-mo397/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [567. å­—ç¬¦ä¸²çš„æ’åˆ—](https://leetcode-cn.com/problems/permutation-in-string/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/permutation-in-string/solution/an-zi-fu-hua-dong-ruo-bao-liao-lai-shi-s-h2xq/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤© |
| [594. æœ€é•¿å’Œè°å­åºåˆ—](https://leetcode-cn.com/problems/longest-harmonious-subsequence/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-harmonious-subsequence/solution/gong-shui-san-xie-yi-ti-shuang-jie-hua-d-quuh/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [643. å­æ•°ç»„æœ€å¤§å¹³å‡æ•° I](https://leetcode-cn.com/problems/maximum-average-subarray-i/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-average-subarray-i/solution/hua-dong-chuang-kou-luo-ti-han-mo-ban-by-buo3/) | ç®€å• | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„](https://leetcode-cn.com/problems/subarrays-with-k-different-integers/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/subarrays-with-k-different-integers/solution/miao-dong-xi-lie-xiang-jie-shuang-zhi-zh-9k8w/) | å›°éš¾ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [1004. æœ€å¤§è¿ç»­1çš„ä¸ªæ•° III](https://leetcode-cn.com/problems/max-consecutive-ones-iii/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/max-consecutive-ones-iii/solution/san-chong-jie-fa-cong-dong-tai-gui-hua-d-gxks/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤© |
| [1052. çˆ±ç”Ÿæ°”çš„ä¹¦åº—è€æ¿](https://leetcode-cn.com/problems/grumpy-bookstore-owner/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/grumpy-bookstore-owner/solution/hua-dong-chuang-kou-luo-ti-by-ac_oier-nunu/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1208. å°½å¯èƒ½ä½¿å­—ç¬¦ä¸²ç›¸ç­‰](https://leetcode-cn.com/problems/get-equal-substrings-within-budget/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/get-equal-substrings-within-budget/solution/ni-bu-ke-neng-kan-bu-dong-de-qian-zhui-h-u4l1/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©      |
| [1423. å¯è·å¾—çš„æœ€å¤§ç‚¹æ•°](https://leetcode-cn.com/problems/maximum-points-you-can-obtain-from-cards/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/maximum-points-you-can-obtain-from-cards/solution/jian-dan-de-hua-dong-chuang-kou-he-kuai-1go5h/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤©ğŸ¤© |
| [1438. ç»å¯¹å·®ä¸è¶…è¿‡é™åˆ¶çš„æœ€é•¿è¿ç»­å­æ•°ç»„](https://leetcode-cn.com/problems/longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit/solution/xiang-jie-er-fen-hua-dong-chuang-kou-dan-41g1/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤© |
| [1838. æœ€é«˜é¢‘å…ƒç´ çš„é¢‘æ•°](https://leetcode-cn.com/problems/frequency-of-the-most-frequent-element/) | [LeetCode é¢˜è§£é“¾æ¥](https://leetcode-cn.com/problems/frequency-of-the-most-frequent-element/solution/gong-shui-san-xie-cong-mei-ju-dao-pai-xu-kxnk/) | ä¸­ç­‰ | ğŸ¤©ğŸ¤©ğŸ¤© |

**æ³¨ï¼šä»¥ä¸Šç›®å½•æ•´ç†æ¥è‡ª [wiki](https://github.com/SharingSource/LogicStack-LeetCode/wiki/æ»‘åŠ¨çª—å£)ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½å¼•ç”¨è¯·ä¿ç•™å‡ºå¤„ã€‚**

---

## æœ€å

**å¦‚æœæœ‰å¸®åŠ©åˆ°ä½ ï¼Œè¯·ç»™é¢˜è§£ç‚¹ä¸ªèµå’Œæ”¶è—ï¼Œè®©æ›´å¤šçš„äººçœ‹åˆ° ~ ("â–”â–¡â–”)/**

ä¹Ÿæ¬¢è¿ä½  [å…³æ³¨æˆ‘](https://oscimg.oschina.net/oscnet/up-19688dc1af05cf8bdea43b2a863038ab9e5.png) å’Œ åŠ å…¥æˆ‘ä»¬çš„[ã€Œç»„é˜Ÿæ‰“å¡ã€](https://leetcode-cn.com/u/ac_oier/)å°ç¾¤ ï¼Œæä¾›å†™ã€Œè¯æ˜ã€&ã€Œæ€è·¯ã€çš„é«˜è´¨é‡é¢˜è§£ã€‚

æ‰€æœ‰é¢˜è§£å·²ç»åŠ å…¥ [åˆ·é¢˜æŒ‡å—](https://github.com/SharingSource/LogicStack-LeetCode/wiki)ï¼Œæ¬¢è¿ star å“¦ ~
